function barChart(){canvas=document.getElementById("bchart"),canvas&&canvas.getContext&&(context=canvas.getContext("2d")),chartSettings(),drawAxisLabelMarkers(),drawChartWithAnimation()}function chartSettings(){cMargin=25,cSpace=60,cHeight=canvas.height-2*cMargin-cSpace,cWidth=canvas.width-2*cMargin-cSpace,cMarginSpace=cMargin+cSpace,cMarginHeight=cMargin+cHeight,bMargin=15,totalBars=percents.length,bWidth=cWidth/totalBars-bMargin,maxDataValue=0;for(var t=0;totalBars>t;t++){var a=percents[t].split(","),e=parseInt(a[1]);parseInt(e)>parseInt(maxDataValue)&&(maxDataValue=e)}totLabelsOnYAxis=8,context.font="9pt Arial",ctr=0,numctr=100,speed=10}function drawAxisLabelMarkers(){context.lineWidth="2.0",drawAxis(cMarginSpace,cMarginHeight,cMarginSpace,cMargin),drawAxis(cMarginSpace,cMarginHeight,cMarginSpace+cWidth,cMarginHeight),context.lineWidth="1.0",drawMarkers()}function drawAxis(t,a,e,n){context.beginPath(),context.moveTo(t,a),context.lineTo(e,n),context.closePath(),context.stroke()}function drawMarkers(){var t=parseInt(maxDataValue/totLabelsOnYAxis);context.textAlign="right",context.fillStyle="#000";for(var a=0;totLabelsOnYAxis>=a;a++){markerVal=a*t,markerValHt=a*t*cHeight;var e=cMarginSpace-5,n=cMarginHeight-markerValHt/maxDataValue;context.fillText(markerVal,e,n,cSpace)}context.textAlign="center";for(var a=0;totalBars>a;a++)arrval=percents[a].split(","),name=arrval[0],markerXPos=cMarginSpace+bMargin+a*(bWidth+bMargin)+bWidth/2,markerYPos=cMarginHeight+13,context.fillText(name,markerXPos,markerYPos,bWidth);context.save(),context.translate(cMargin,cHeight/2),context.rotate(-90*Math.PI/180),context.fillText("",0,0),context.restore(),context.fillText("",cMarginSpace+cWidth/2,cMarginHeight+30)}function drawChartWithAnimation(){for(var t=0;totalBars>t;t++){var a=percents[t].split(",");bVal=parseInt(a[1]),bHt=bVal*cHeight/maxDataValue/numctr*ctr,bX=cMarginSpace+t*(bWidth+bMargin)+bMargin,bY=cMarginHeight-bHt-2,drawRectangle(bX,bY,bWidth,bHt,!0)}numctr>ctr&&(ctr+=1,setTimeout(arguments.callee,speed))}function drawRectangle(t,a,e,n,r){if(context.beginPath(),context.rect(t,a,e,n),context.closePath(),context.stroke(),r){var c=context.createLinearGradient(0,0,0,300);c.addColorStop(0,"red"),c.addColorStop(1,"rgba(67,203,36,.15)"),context.fillStyle=c,context.strokeStyle=c,context.fill()}}var Months=new Array,price=document.getElementById("txtPrice"),months=document.getElementById("cboxMonths"),percents=[];percents[0]="A, 81",percents[1]="B, 11",percents[2]="C, 5",percents[3]="D, 3",Months[0]="1, 1000000",Months[1]="2, 2200000",Months[2]="3, 3700000",Months[3]="4, 3900000",Months[4]="5, 3400000",Months[5]="6, 3600000",Months[6]="7, 3750000",Months[7]="8, 3000000",Months[8]="9, 3500000",Months[9]="10, 2700000",Months[10]="11, 3600000",Months[11]="12, 4000000";var canvas,context,cWidth,cHeight,cMargin,cSpace,cMarginSpace,cMarginHeight,bWidth,bMargin,totalBars,maxDataValue,bWidthMargin,ctr,numctr,speed,totLabelsOnYAxis;